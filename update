#!/bin/bash   

# Author: Gergely Sz√°z <gergely.szaz@liferay.com>
# For updating a certain branch from liferay-portal-ee, typically:
#		master
#		ee-7.0.x
#		ee-6.2.x

# check if there is a parameter
if [ $# -eq 0 ]
  then
	echo "No branchname supplied"
	exit 1
fi

# get branch name
BRANCH=$(branch)
if [ $BRANCH == $1 ]
  then
    echo "$1 is in local repository"
    ACTION=pull
  else
	ACTION=fetch
fi

BRANCH=$1
echo
echo "Updating $BRANCH"

git $ACTION upstream $BRANCH:$BRANCH  # does not actually merge changes, if it's not branch:branch
git push origin $BRANCH:$BRANCH